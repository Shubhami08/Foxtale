{% if settings.envType == 'production' %}
{% assign env = 'pdp' %}
{% elsif settings.envType == 'sandbox' %}
{% assign env = 'sandbox.pdp' %}
{%endif%}

<script rel="preload" defer>
{% if settings.goEnable %}
window.merchantInfo  = {
        mid: "{{ settings.mid }}",
        environment: "{{ settings.envType }}",
        type: "merchantInfo",
  		storeId: "{{shop.id}}",
  		fbpixel: "{{settings.fbpixel}}",
      }
var productFormSelector = '';
var cart = {{ cart | json }}
var templateName = '{{template.name}}'
</script>

<!-- <script rel="preload" src="https://{{ env }}.gokwik.co/merchant-integration/build/merchant.integration.js?v4"></script> -->
<script>
var app=function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e){var n=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,n||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===t(n)?n:String(n)}function n(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,e(o.key),o)}}function r(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}function u(e,n){if(n&&("object"===t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return i(e)}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function p(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||f(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},d.apply(this,arguments)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function y(){}function v(t){return t()}function g(){return Object.create(null)}function m(t){t.forEach(v)}function w(t){return"function"==typeof t}function b(e,n){return e!=e?n==n:e!==n||e&&"object"===t(e)||"function"==typeof e}function k(t){t.parentNode&&t.parentNode.removeChild(t)}var j;function S(t){j=t}function O(){if(!j)throw new Error("Function called outside component initialization");return j}function _(t){O().$$.on_mount.push(t)}function x(t){O().$$.on_destroy.push(t)}var E=[],I=[],q=[],P=[],A=Promise.resolve(),C=!1;function L(t){q.push(t)}var N=new Set,T=0;function R(){if(0===T){var t=j;do{try{for(;T<E.length;){var e=E[T];T++,S(e),D(e.$$)}}catch(t){throw E.length=0,T=0,t}for(S(null),E.length=0,T=0;I.length;)I.pop()();for(var n=0;n<q.length;n+=1){var r=q[n];N.has(r)||(N.add(r),r())}q.length=0}while(E.length);for(;P.length;)P.pop()();C=!1,N.clear(),S(t)}}function D(t){if(null!==t.fragment){t.update(),m(t.before_update);var e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(L)}}var G=new Set;function U(t,e){var n,r,o,i=t.$$;null!==i.fragment&&(n=i.after_update,r=[],o=[],q.forEach((function(t){return-1===n.indexOf(t)?r.push(t):o.push(t)})),o.forEach((function(t){return t()})),q=r,m(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function J(t,e){-1===t.$$.dirty[0]&&(E.push(t),C||(C=!0,A.then(R)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function F(t,e,n,r,o,i,a){var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[-1],u=j;S(t);var l=t.$$={fragment:null,ctx:[],props:i,update:y,not_equal:o,bound:g(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:g(),dirty:c,skip_bound:!1,root:e.target||u.$$.root};a&&a(l.root);var s,f,d,h=!1;if(l.ctx=n?n(t,e.props||{},(function(e,n){var r=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:n;return l.ctx&&o(l.ctx[e],l.ctx[e]=r)&&(!l.skip_bound&&l.bound[e]&&l.bound[e](r),h&&J(t,e)),n})):[],l.update(),h=!0,m(l.before_update),l.fragment=!!r&&r(l.ctx),e.target){if(e.hydrate){var b=(d=e.target,Array.from(d.childNodes));l.fragment&&l.fragment.l(b),b.forEach(k)}else l.fragment&&l.fragment.c();e.intro&&((s=t.$$.fragment)&&s.i&&(G.delete(s),s.i(f))),function(t,e,n,r){var o=t.$$,i=o.fragment,a=o.after_update;i&&i.m(e,n),r||L((function(){var e,n=t.$$.on_mount.map(v).filter(w);t.$$.on_destroy?(e=t.$$.on_destroy).push.apply(e,p(n)):m(n),t.$$.on_mount=[]})),a.forEach(L)}(t,e.target,e.anchor,e.customElement),R()}S(u)}function M(t,e){document.dispatchEvent(function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.bubbles,o=void 0!==r&&r,i=n.cancelable,a=void 0!==i&&i,c=document.createEvent("CustomEvent");return c.initCustomEvent(t,o,a,e),c}(t,Object.assign({version:"3.57.0"},e),{bubbles:!0}))}var B=function(t){c(n,t);var e=h(n);function n(t){if(o(this,n),!t||!t.target&&!t.$$inline)throw new Error("'target' is a required option");return e.call(this)}return r(n,[{key:"$destroy",value:function(){d(l(n.prototype),"$destroy",this).call(this),this.$destroy=function(){console.warn("Component was already destroyed")}}},{key:"$capture_state",value:function(){}},{key:"$inject_state",value:function(){}}]),n}(function(){function t(){o(this,t)}return r(t,[{key:"$destroy",value:function(){U(this,1),this.$destroy=y}},{key:"$on",value:function(t,e){if(!w(e))return y;var n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}}},{key:"$set",value:function(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}]),t}());function H(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||f(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function z(t,n,r){return(n=e(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function X(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return K(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return K(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Q=[];var V=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y,r=new Set;function o(n){if(b(t,n)&&(t=n,e)){var o,i=!Q.length,a=X(r);try{for(a.s();!(o=a.n()).done;){var c=o.value;c[1](),Q.push(c,t)}}catch(t){a.e(t)}finally{a.f()}if(i){for(var u=0;u<Q.length;u+=2)Q[u][0](Q[u+1]);Q.length=0}}}return{set:o,update:function(e){o(e(t))},subscribe:function(i){var a=[i,arguments.length>1&&void 0!==arguments[1]?arguments[1]:y];return r.add(a),1===r.size&&(e=n(o)||y),i(t),function(){r.delete(a),0===r.size&&e&&(e(),e=null)}}}}(!1);function W(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Z(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function Z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function tt(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */tt=function(){return e};var e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),c=new $(r||[]);return o(a,"_invoke",{value:j(t,n,c)}),a}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var p={};function d(){}function h(){}function y(){}var v={};l(v,a,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(x([])));m&&m!==n&&r.call(m,a)&&(v=m);var w=y.prototype=d.prototype=Object.create(v);function b(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function k(e,n){function i(o,a,c,u){var l=f(e[o],e,a);if("throw"!==l.type){var s=l.arg,p=s.value;return p&&"object"==t(p)&&r.call(p,"__await")?n.resolve(p.__await).then((function(t){i("next",t,c,u)}),(function(t){i("throw",t,c,u)})):n.resolve(p).then((function(t){s.value=t,c(s)}),(function(t){return i("throw",t,c,u)}))}u(l.arg)}var a;o(this,"_invoke",{value:function(t,e){function r(){return new n((function(n,r){i(t,e,n,r)}))}return a=a?a.then(r,r):r()}})}function j(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return E()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=S(a,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function S(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var o=f(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function $(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function x(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=y,o(w,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:h,configurable:!0}),h.displayName=l(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},b(k.prototype),l(k.prototype,c,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new k(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(w),l(w,u,"Generator"),l(w,a,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=x,$.prototype={constructor:$,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}function et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function nt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?et(Object(n),!0).forEach((function(e){z(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var rt={local:"http://localhost:8080/integration.js",dev:"https://dev.pdp.gokwik.co/integration.js",hdev:"https://dev.pdp.gokwik.co/integration.js",ndev:"https://dev.pdp.gokwik.co/integration.js",qa:"https://qa.pdp.gokwik.co/integration.js",qatwo:"https://qatwo.pdp.gokwik.co/integration.js",sandbox:"https://sandbox.pdp.gokwik.co/integration.js",production:"https://pdp.gokwik.co/integration.js","qa-rto":"https://qa1.pdp.gokwik.co/integration.js",qaone:"https://qa2.pdp.gokwik.co/integration.js"},ot={local:"http://localhost:8080/integration.js",dev:"https://dev-hits.gokwik.co/api/v1/events",hdev:"https://dev-hits.gokwik.co/api/v1/events",ndev:"https://dev-hits.gokwik.co/api/v1/events",qa:"https://qa-hits.gokwik.co/api/v1/events",qatwo:"https://qa-hits.gokwik.co/api/v1/events",sandbox:"https://sandbox-hits.gokwik.co/api/v1/events",production:"https://hits.gokwik.co/api/v1/events","qa-rto":"https://qa-hits.gokwik.co/api/v1/events",qaone:"https://qa-hits.gokwik.co/api/v1/events"},it={local:"https://devanalytics.gokwik.co/analytics.js",dev:"https://devanalytics.gokwik.co/analytics.js",hdev:"https://devanalytics.gokwik.co/analytics.js",ndev:"https://devanalytics.gokwik.co/analytics.js",qa:"https://qa-analytics.gokwik.co/analytics.js",qatwo:"https://qa-analytics.gokwik.co/analytics.js",sandbox:"https://sandboxanalytics.gokwik.co/analytics.js",production:"https://analytics.gokwik.co/analytics.js","qa-rto":"https://qa-analytics.gokwik.co/analytics.js",qaone:"https://qa-analytics.gokwik.co/analytics.js"},at=function(t,e){window.gokwikSdk.initCheckout(t),e&&ht("gokwik-button-clicked","onGkClick")},ct=function(t){var e=rt[t],n=document.createElement("script");n.setAttribute("src",e),n.id="gokwikIntegration",document.head.appendChild(n),n.onload=function(){return lt()}},ut=function(t){var e=!0,n=it[t],r=document.createElement("script");r.setAttribute("src",n),r.id="gokwikHeaderAnalytics",document.querySelectorAll("script").forEach((function(t){t.src.includes("analytics.gokwik.co/analytics.js")&&(e=!1)})),e&&document.head.appendChild(r)},lt=function(){window.addEventListener("gokwikLoaded",(function(){V.set(!0),gokwikSdk&&gokwikSdk.on("modal_closed",(function(){dt()}))}))},st=function(t){var e,n,r,o;r={items:[]},n=t.get("pid").split(" "),o=t.get("cp");var i={};n&&(n.map((function(t){i[t]?i[t]+=1:i[t]=1})),Object.keys(i).map((function(t){r.items.push({id:t,quantity:i[t]})})));return null!==(e=r.items)&&void 0!==e&&e.length&&(o?gt("discount_code",o,0):gt("discount_code","",-1)),{pageProducts:n,pageItem:r,pageCoupon:o,productUrl:undefined}},ft=function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>2?arguments[2]:void 0,o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[];r&&null!==(t=r.items)&&void 0!==t&&t.length?(o.checkoutType="headless",e=JSON.stringify(r)):e=a.length?JSON.stringify({items:a}):window.productFormSelector?JSON.stringify(bt(document.querySelector(window.productFormSelector))):JSON.stringify(pt()),n&&(e=bt(document.querySelector(n)),e=JSON.stringify(e)),yt("POST","/cart/add.js",JSON.parse(e),(function(t){200==t&&(at(o,!1),i.items,localStorage.setItem("gkbuynow","active"),gt("gkbuynow","active",0))}))},pt=function(){var t,e,n=document.querySelector('[action="/cart/add"]'),r=bt(n);r.id||(r.id=null===(t=document.querySelector('[name="id"]'))||void 0===t?void 0:t.value);r.quantity||(r.quantity=null===(e=document.querySelector('[name="quantity"'))||void 0===e?void 0:e.value);return r.form_type="product",r.utf8="âœ“",r},dt=function(){var t=JSON.parse(localStorage.getItem("cartItems"))||JSON.parse(vt("cartItems"))||{};if(t&&t.length){var e={items:t};localStorage.removeItem("gkbuynow"),mt("gkbuynow"),yt("POST","/cart/clear.js","",(function(t){200===t&&yt("POST","/cart/add.js",e,(function(t){200==t&&(localStorage.removeItem("cartItems"),mt("cartItems"))}))}))}else"active"!==localStorage.getItem("gkbuynow")&&"active"!==vt("gkbuynow")||yt("POST","/cart/clear.js","",(function(){localStorage.removeItem("gkbuynow"),mt("gkbuynow")}))},ht=function(t,e){var n=ot[window.merchantInfo.environment],r=Date.now(),o=navigator.userAgent,i=window.merchantInfo.mid,a=t,c=e,u=vt("_shopify_sa_p"),l=localStorage.getItem("gokwik-sessionID")||vt("gokwik-sessionID"),s=vt("_shopify_s")||null,f=vt("gk_landing_page")||"/",p=vt("gk_orig_referrer")||"blank",d=nt(nt({timestamp:r,userAgent:o,version:"1",merchantId:i,name:a,sessionId:l,type:"event",adSource:u,eventType:c},s&&{shopifySessionId:s}),{},{landing_page:f,orig_referrer:p});l||delete d.sessionId,u||delete d.adSource,yt("POST",n,d,(function(t,e){}))},yt=function(){var t,e=(t=tt().mark((function t(e,n,r,o){var i,a,c;return tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"https://foxtale.in"===window.location.origin&&"/cart/add.js"===n?(i={url:"https://foxtale.in/cart/add.js?_easygift_internal=true",method:"POST","content-type":"application/json",data:r},$.ajax(i).done((function(t,e,n){o(n.status,t)})).fail((function(t,e,n){console.error("Request failed:",e,n)}))):((a=new XMLHttpRequest).open(e,n,!0),a.setRequestHeader("Content-type","application/json"),a.onload=function(){var t=a.status,e=a.response;o(t,e)},c=r?JSON.stringify(r):null,null!=r&&r["properties[_ftmx]"]&&(c=r),a.send(c));case 1:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Y(i,r,o,a,c,"next",t)}function c(t){Y(i,r,o,a,c,"throw",t)}a(void 0)}))});return function(t,n,r,o){return e.apply(this,arguments)}}(),vt=function(t){var e,n=W(document.cookie.split(";"));try{for(n.s();!(e=n.n()).done;){var r=H(e.value.trim().split("="),2),o=r[0],i=r[1];if(o===t)return decodeURIComponent(i)}}catch(t){n.e(t)}finally{n.f()}return null},gt=function(t,e,n){var r=new Date;r.setDate(r.getDate()+n);var o=wt(window.merchantInfo.environment),i=t+"="+encodeURIComponent(e)+"; path=/; expires="+r.toUTCString()+"; SameSite=None; Secure; domain="+o;document.cookie=i},mt=function(t){var e=new Date;e.setFullYear(e.getFullYear()-1);var n=wt(window.merchantInfo.environment),r=t+"=; path=/; expires="+e.toUTCString()+"; SameSite=None; Secure; domain="+n;document.cookie=r},wt=function(t){return"local"===t?"":"dev"===t||"hdev"===t||"ndev"===t||"idev"===t?"dev.pdp.gokwik.co":"production"===t?"pdp.gokwik.co":"sandbox"===t?"sandbox.pdp.gokwik.co":"qa-rto"===t?"qa2.pdp.gokwik.co":"qaone"===t?"qa1.pdp.gokwik.co":"qatwo"===t||"idev"===t?"qatwo.pdp.gokwik.co":"qa"===t?"qa.pdp.gokwik.co":""},bt=function(t){for(var e={},n=t.querySelectorAll("input, select, textarea"),r=0;r<n.length;++r){var o=n[r],i=o.name,a=o.value;i&&(e[i]=a)}return e};function kt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function jt(t){var e={c:y,l:function(t){throw new Error("options.hydrate only works if the component was compiled with the `hydratable: true` option")},m:y,p:y,i:y,o:y,d:y};return M("SvelteRegisterBlock",{block:e,id:jt.name,type:"component",source:"",ctx:t}),e}function St(t,e,n){var r,o,i,a,c=e.$$slots,u=void 0===c?{}:c;e.$$scope,function(t,e,n){for(var r=0,o=Object.keys(e);r<o.length;r++){var i=o[r];~n.indexOf(i)||console.warn("<".concat(t,'> received an unexpected slot "').concat(i,'".'))}}("Main",u,[]);var l=window.merchantInfo;_((function(){ct(l.environment);var t=new URLSearchParams(window.location.search);if(t.get("pid")){var e=st(t);r=e.pageProducts,o=e.pageItem,i=e.pageCoupon,a=e.productUrl,V.subscribe((function(t){t&&o.items.length&&s(!1)}))}window.onload=function(){ut(l.environment)},!vt("gk_landing_page")&&gt("gk_landing_page","".concat(window.location.pathname),10),!vt("gk_orig_referrer")&&gt("gk_orig_referrer",document.referrer,10)}));var s=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];yt("GET","/cart.js","",(function(n,c){var u=JSON.parse(c);if(200===n&&u.item_count){var s=u.items.map((function(t){return{id:t.id,quantity:t.quantity,options_with_values:t.options_with_values}}));localStorage.setItem("cartItems",JSON.stringify(s)),gt("cartItems",JSON.stringify(s),0),yt("POST","/cart/clear.js","",(function(n){200===n&&ft(t,r,o,i,a,l,u,e)}))}else ft(t,r,o,i,a,l,u,e)}))};window.onCheckoutClick=function(t){var e=t.lastElementChild;e.setAttribute("id","btn-loader"),t.disabled=!0,t.style.cursor="not-allowed",at(window.merchantInfo,!0),e.style.display="flex",setTimeout((function(){e.style.display="none",t.disabled=!1,t.style.cursor="pointer",e.removeAttribute("id")}),3e3)},window.onBuyNowClick=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];ht("gk_buy_now_button_clicked","onGkClick");var r=t.children[0];r.setAttribute("id","btn-loader"),t.disabled=!0,t.style.cursor="not-allowed",s(e,n),r.style.display="flex",setTimeout((function(){r.style.display="none",t.disabled=!1,t.style.cursor="pointer",r.removeAttribute("id")}),3e3)},window.healthCheckInitGokwik=function(t){window.gokwikSdk.initCheckout(t),ht("gokwik-button-clicked","onGkClick")};var f=[];return Object.keys(e).forEach((function(t){~f.indexOf(t)||"$$"===t.slice(0,2)||"slot"===t||console.warn("<Main> was created with unknown prop '".concat(t,"'"))})),t.$capture_state=function(){return{onDestroy:x,onMount:_,addCartBuyNow:ft,createHeaderAnalyticsScript:ut,createIntegrationScript:ct,getCookie:vt,getHeadlessParams:st,initiateGokwik:at,logEvent:ht,makeXhr:yt,setCookie:gt,store_gokwikLoaded:V,pageProducts:r,pageItem:o,pageCoupon:i,productUrl:a,merchantInfo:l,gokwikBuyNow:s}},t.$inject_state=function(t){"pageProducts"in t&&(r=t.pageProducts),"pageItem"in t&&(o=t.pageItem),"pageCoupon"in t&&(i=t.pageCoupon),"productUrl"in t&&(a=t.productUrl)},e&&"$$inject"in e&&t.$inject_state(e.$$inject),[]}return new(function(t){c(n,t);var e=kt(n);function n(t){var r;return o(this,n),F(i(r=e.call(this,t)),t,St,jt,b,{}),M("SvelteRegisterComponent",{component:i(r),tagName:"Main",options:t,id:jt.name}),r}return r(n)}(B))({target:window.parent})}();




</script>

<!-- <script>
   let  targetNode = document.querySelector('html')
  
   function setCookie(cName, cValue, expDays) {
    let date = new Date();
    cValue = encodeURIComponent(cValue)
    date.setTime(date.getTime() + (expDays * 24 * 60 * 60 * 1000));
    const expires = "expires=" + date.toUTCString();
    document.cookie = cName + "=" + cValue + "; " + expires + "; path=/";
}

  const callback = function(mutationsList) {
    let couponNode = document.querySelector('.px-11')
    mutationsList.forEach(function(mutation) {
        mutation.addedNodes.forEach(function(added_node) {
          if(couponNode){
            let proCode = couponNode.innerText
  if(proCode) setCookie('ibBarCouponText', proCode, 1);
          }
        });
      mutation.removedNodes.forEach(function(removed_node) {
        if(!couponNode){
            setCookie('ibBarCouponText', null, -1);
        }
        });
    });
};


  
     const config = { attributes: true, childList: true, subtree: true };

   const observer1 = new MutationObserver(callback);
observer1.observe(targetNode, config); 
</script> -->
<script defer>
  let  targetNode = document.querySelector('html')
  let gkButtonCode = '<button type="button" onclick="onBuyNowClick(this)" id="gokwik-buy-now"{% if settings.hideFlow %} style="display:none !important;" {% endif %}   data-foxtale-event="buy-now-button-click-event" foxtale-event-attr-from="from-pdp" foxtale-event-attr-api-url-for-data="{{ product.url }}">{{ settings.buynow-titile }}<div style="display:none"><div class="cir-loader">Loading..</div></div></button> '
  let buttonAdded = false
  let parsedBtnCode = new DOMParser().parseFromString(gkButtonCode, 'text/html').querySelectorAll('#gokwik-buy-now')[0];
  const sideCartCallback = function(mutationList){
      mutationList.forEach((mutation) => {
          let sidecart = document.querySelector('.t4s-sticky-atc__btns')
          let sideCartButtonParent = document.querySelector('.single_add_to_cart_button')
          mutation.addedNodes.forEach((added_node) => {
              if(sidecart){
                  if(sideCartButtonParent && !buttonAdded){
                      buttonAdded = true
                      sideCartButtonParent.after(parsedBtnCode)
                  }
              }
          })
      })
    }
     const config = { attributes: true, childList: true, subtree: true };
      const customBtn = new MutationObserver(sideCartCallback)
      customBtn.observe(targetNode, config)
</script>
<style>
{% if settings.goEnable %}
.gokwik-checkout {
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: end;
  flex-direction: column;
}
.gokwik-checkout button {
  max-width:100%;
  width:100%;
  border: none;
  display: flex;
  justify-content: center;
  align-items: center;
  background: {{ settings.priClr }};
  position: relative;
  margin: 0;
  border-radius: unset;
/*   border-radius: 2.5rem; */
  padding: 5px 10px;
  height:40px;
}
#gokwik-buy-now.disabled, .gokwik-disabled{
  opacity:0.5;
  cursor: not-allowed;
  }
  .gokwik-checkout button:focus {
  outline: none;
}
.gokwik-checkout button > span {
  display: flex;
}
.gokwik-checkout button > span.btn-text {
  display: flex;
  flex-direction: column;
  color: {{ settings.secClr }};
  align-items: flex-start;
}
.gokwik-checkout button > span.btn-text > span:last-child {
	padding-bottom: 2px;
    font-size: 9px;
    line-height: 10px;
    text-transform: initial;
}
.gokwik-checkout button > span.btn-text > span:first-child {
   font-size: 13px;
}
.gokwik-checkout button > span.pay-opt-icon img:first-child {
  margin-right: 10px;
  margin-left: 10px;
}
/*   Additional */

a.single_add_to_cart_button.button.fx-custom-btn-dark {
    display: none;
}
.t4s-sticky-atc__atc {
    min-width: 190px!important;
}
  .col-auto.sticky_atc_btn.variations_form.flex.wrap.al_center.fl_center {
    flex-wrap: nowrap!important;
  width: 425px;
}
 .customproduct1-template  #gokwik-buy-now #btn-loader {
   border-radius:0;
  }

 @media only screen and (min-width: 425px) {
  #gokwik-buy-now {
    width: 50%;
  }
 }
{% endif %}
  
{% if settings.goBuynowEnable %}
 #gokwik-buy-now {
   background: {{ settings.btnBClr }};
   width: 50%;
   color: {{ settings.btnTextClr }};
   cursor: pointer;
   line-height: 1;
   border: none;
   padding: 15px 20px;
   font-size: 14px;
    margin-bottom: 0px;
    text-transform: uppercase;
   position:relative;
  height: 40px;
    margin-top: 0px;
  justify-content: center;
    display: flex!important;
    align-items: center;
  letter-spacing: 1px;
  min-width: 190px;
  order: 3;
 }
 @media(max-width: 767px) {
  #gokwik-buy-now {
    font-size: 12px;
  min-width:  50%!important;
  }
  .t4s-sticky-atc__atc {
    min-width: 50%!important;
}
 }
  
{% endif %}
/* Loader CSS */
  #btn-loader{
    display: none;
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    justify-content: center;
    align-items: center;
    background:{{ settings.priClr }};
    border-radius:2.5rem;
    
  } 

.cir-loader,
.cir-loader:after {
  border-radius: 50%;
  width: 35px;
  height: 35px;
}
.cir-loader {
  margin: 6px auto;
  font-size: 10px;
  position: relative;
  text-indent: -9999em;
  border-top: 0.5em solid rgba(255, 255, 255, 0.2);
  border-right: 0.5em solid rgba(255, 255, 255, 0.2);
  border-bottom: 0.5em solid rgba(255, 255, 255, 0.2);
  border-left: 0.5em solid #ffffff;
  -webkit-transform: translateZ(0);
  -ms-transform: translateZ(0);
  transform: translateZ(0);
  -webkit-animation: load8 1.1s infinite linear;
  animation: load8 1.1s infinite linear;
}
@-webkit-keyframes load8 {
  0% {
    -webkit-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
@keyframes load8 {
  0% {
    -webkit-transform: rotate(0deg);
    transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@media (max-width:425px){
  .gokwik-checkout{
    align-items: center;
  }
}
@media (max-width:345px){
  .gokwik-checkout button{
     min-width: 290px;
  }
}
</style> 
{% endif  %}
<!-- <script>
  const initWithBundlrDiscount = (e) => {
    window.bndlr.getCheckoutInfo(function (data) {
      let popupCheck = false;
      setTimeout(() => {
        if (!popupCheck) onCheckoutClick(e);
      }, 2200);
      // try {
        if (
          typeof data !== 'undefined' &&
          typeof data.can_apply_discount !== 'undefined' &&
          data.can_apply_discount === true
        ) {
          createCookie('discount_code', data?.code);
        } 
      // } catch {}
      onCheckoutClick(e);
      popupCheck = true;
    });
  };
  const createCookie = (name, value, days) => {
    let expires = '';
    if (days) {
      let date = new Date();
      date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);
      expires = '; expires=' + date.toUTCString();
    }
    document.cookie = name + '=' + (value || '') + expires + '; path=/';
  };
  
</script>
 -->